import{u as W,j as H,k as Q,$ as E,V as G,_ as J,a as X,b as Y,c as _,d as Z,D as ee,e as te,f as ae,F as le,s as se,g as oe,h as re,i as ne}from"./VSnackbar-CbQbDyw4.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as B,V as F}from"./VRow-Mnohgqf0.js";import{V as O}from"./VDivider-N8ng3qlS.js";import{r,o as c,f as p,e as a,b as e,d as m,x as z,n as v,a6 as T,$ as j,P as ie,Q as de,w as ce,j as pe,y as A,t as me,v as fe,a2 as ve}from"./main-BYcbxEWm.js";import{V as _e}from"./VCardText-BpoNsfWm.js";import{V as q}from"./VCard-CqltLR2E.js";/* empty css              */import"./VTextField-v0SKe5Mm.js";import"./VList-DmqP4JZE.js";import"./VImg-Akd3uzXQ.js";import"./VOverlay-CdMVVU13.js";import"./VChip-DvaoTGRx.js";import"./VTooltip-efeAXtHD.js";import"./index-DYf1Ga7p.js";import"./VMenu-CVBjlTVq.js";const Se=""+new URL("5-qijms7B5.png",import.meta.url).href,K=f=>(ie("data-v-d1ff3871"),f=f(),de(),f),we=["src"],ge={class:"d-flex flex-wrap gap-4 justify-space-between"},Ve=K(()=>m("span",{class:"text-h5 text-white"},"Previous",-1)),he=K(()=>m("span",{class:"text-h5 text-white"},"Continue",-1)),ye={__name:"SignatureReview",props:{viewMode:{type:Boolean,required:!0},currentStep:{type:Number,required:!0}},emits:["prevStep","nextStep"],setup(f,{emit:S}){const w=f,g=S,u=W(),d=H();let l=r(!1);const y=async()=>{l.value=!0;const n=new FormData;n.append("name",d.data.name),n.append("email",d.data.email),n.append("otp",d.data.otp),await E("/signature/"+d.data.shortUrl,{method:"POST",body:n}).then(o=>{l.value=!1,u.setDocument(o.data),u.setDownloadUrl(o.signedDoc),d.setAllSigner(o.data.signers),g("nextStep",1)}).catch(o=>{l.value=!1,g("alert",{data:o,type:"error"})})};return(n,o)=>(c(),p(F,null,{default:a(()=>[e(B,{class:"mx-auto",cols:"12"},{default:a(()=>[m("div",null,[e(Q,{"no-actions":""},{default:a(()=>[m("div",{class:z(w.viewMode?"pdf-container pdf-loader":"pdf-container-iframe pdf-loader-iframe")},[m("iframe",{src:v(u).reviewSignedUrl,height:"100%",width:"100%"},null,8,we)],2)]),_:1})]),e(O,{class:"border-1px"}),e(B,{cols:"12"},{default:a(()=>[m("div",ge,[e(T,{color:"success",onClick:o[0]||(o[0]=x=>n.$emit("prevStep",1))},{default:a(()=>[e(j,{icon:"tabler-arrow-left",start:"",class:"flip-in-rtl"}),Ve]),_:1}),e(T,{loading:v(l),color:"success",onClick:y,disabled:v(l)},{default:a(()=>[he,e(j,{icon:"tabler-arrow-right",end:"",class:"flip-in-ltr"})]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1}))}},xe=ue(ye,[["__scopeId","data-v-d1ff3871"]]),Fe={__name:"[id]",setup(f){const S=pe(),w=r(S.params.id),g=r(S.query.fullview),u=r(!0);parseInt(g.value)===0&&(u.value=!1);const d=[{title:"Verify",icon:se},{title:"Review",icon:oe},{title:"Sign",icon:re},{title:"Review",icon:Se},{title:"Download",icon:ne}],l=r(0),y=r(!0);let n=r(null),o=r(null),x=r("error");const b=s=>{var M,$,N,U;const t=s.data,i=s.type,L=s==null?void 0:s.custom;if(n.value=!0,x.value=i,i==="success"||L===!0)o.value=t;else if(typeof(($=(M=t==null?void 0:t.response)==null?void 0:M._data)==null?void 0:$.message)=="object"&&((U=(N=t==null?void 0:t.response)==null?void 0:N._data)==null?void 0:U.message)!==null){let P="";for(const I in t.response._data.message)t.response._data.message.hasOwnProperty(I)&&(P+=`${t.response._data.message[I]}
`);o.value=P.trim()}else o.value=t.response._data.message},V=s=>{l.value=l.value+s},h=s=>{l.value=l.value-s},k=r(0),R=r(0),D=r(0),C=r(null);return ce(l,s=>{s===1&&(k.value++,R.value++),s===2&&C.value&&C.value.resizeCanvas(),D.value=s}),(s,t)=>(c(),p(G,{class:"v-container"},{default:a(()=>[e(q,null,{default:a(()=>[u.value?(c(),p(F,{key:0},{default:a(()=>[e(_e,null,{default:a(()=>[e(J,{"current-step":l.value,"onUpdate:currentStep":t[0]||(t[0]=i=>l.value=i),items:d,"is-active-step-valid":y.value,align:"center"},null,8,["current-step","is-active-step-valid"])]),_:1})]),_:1})):A("",!0),e(O)]),_:1}),e(X,{modelValue:v(n),"onUpdate:modelValue":t[1]||(t[1]=i=>ve(n)?n.value=i:n=i),location:"top end",variant:"flat",color:v(x)},{default:a(()=>[me(fe(v(o)),1)]),_:1},8,["modelValue","color"]),m("div",{class:z({"step-rule":l.value===0})},[e(q,null,{default:a(()=>[e(Y,{modelValue:l.value,"onUpdate:modelValue":t[2]||(t[2]=i=>l.value=i),disabled:""},{default:a(()=>[e(_,null,{default:a(()=>[e(Z,{onNextStep:V,onAlert:b,"short-url":w.value},null,8,["short-url"])]),_:1}),e(_,null,{default:a(()=>[(c(),p(ee,{key:k.value,viewMode:u.value,currentStep:D.value,onPrevStep:h,onNextStep:V},null,8,["viewMode","currentStep"]))]),_:1}),e(_,null,{default:a(()=>[(c(),p(te,{ref_key:"signatureRef",ref:C,key:R.value,onPrevStep:h,onNextStep:V,"short-url":w.value,onAlert:b},null,8,["short-url"]))]),_:1}),e(_,null,{default:a(()=>[(c(),p(xe,{key:k.value,viewMode:u.value,currentStep:D.value,onPrevStep:h,onNextStep:V},null,8,["viewMode","currentStep"]))]),_:1}),e(_,null,{default:a(()=>[e(ae,{viewMode:u.value,onPrevStep:h,onAlert:b},null,8,["viewMode"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),u.value?(c(),p(le,{key:0})):A("",!0)],2)]),_:1}))}};export{Fe as default};
