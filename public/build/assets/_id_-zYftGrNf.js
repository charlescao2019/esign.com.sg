import{u as W,j as z,k as H,$ as Q,V as E,_ as G,a as J,b as X,c as _,d as Y,D as Z,e as ee,f as te,F as ae,s as le,g as se,h as oe,i as re}from"./VSnackbar-DE8yPcAg.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as I,V as q}from"./VRow-Ipej4mo9.js";import{V as F}from"./VDivider-Bdenqjrc.js";import{r as n,o as c,f as p,e as a,b as e,d as m,x as O,n as f,a6 as B,$ as T,P as ue,Q as ie,w as de,j as ce,y as j,t as pe,v as me,a2 as ve}from"./main-Cu5GIDk_.js";import{V as fe}from"./VCardText-Os4btGdn.js";import{V as A}from"./VCard-D9yBweRX.js";/* empty css              */import"./VTextField-CgnEkWb8.js";import"./VList-BC4EJZF0.js";import"./VImg-B1N-NTGZ.js";import"./VOverlay-LOlcdfz4.js";import"./VChip-BUXqhLPu.js";import"./VTooltip-BDijgWqn.js";import"./index-DYf1Ga7p.js";import"./VMenu-GFgOjnR7.js";const _e=""+new URL("5-qijms7B5.png",import.meta.url).href,K=v=>(ue("data-v-d1ff3871"),v=v(),ie(),v),Se=["src"],we={class:"d-flex flex-wrap gap-4 justify-space-between"},Ve=K(()=>m("span",{class:"text-h5 text-white"},"Previous",-1)),ge=K(()=>m("span",{class:"text-h5 text-white"},"Continue",-1)),he={__name:"SignatureReview",props:{viewMode:{type:Boolean,required:!0},currentStep:{type:Number,required:!0}},emits:["prevStep","nextStep"],setup(v,{emit:S}){const w=v,V=S,u=W(),d=z();let l=n(!1);const y=async()=>{l.value=!0;const r=new FormData;r.append("name",d.data.name),r.append("email",d.data.email),r.append("otp",d.data.otp),await Q("/signature/"+d.data.shortUrl,{method:"POST",body:r}).then(s=>{l.value=!1,u.setDocument(s.data),u.setDownloadUrl(s.signedDoc),d.setAllSigner(s.data.signers),V("nextStep",1)}).catch(s=>{l.value=!1,V("alert",{data:s,type:"error"})})};return(r,s)=>(c(),p(q,null,{default:a(()=>[e(I,{class:"mx-auto",cols:"12"},{default:a(()=>[m("div",null,[e(H,{"no-actions":""},{default:a(()=>[m("div",{class:O(w.viewMode?"pdf-container pdf-loader":"pdf-container-iframe pdf-loader-iframe")},[m("iframe",{src:f(u).reviewSignedUrl,height:"100%",width:"100%"},null,8,Se)],2)]),_:1})]),e(F,{class:"border-1px"}),e(I,{cols:"12"},{default:a(()=>[m("div",we,[e(B,{color:"success",onClick:s[0]||(s[0]=x=>r.$emit("prevStep",1))},{default:a(()=>[e(T,{icon:"tabler-arrow-left",start:"",class:"flip-in-rtl"}),Ve]),_:1}),e(B,{loading:f(l),color:"success",onClick:y,disabled:f(l)},{default:a(()=>[ge,e(T,{icon:"tabler-arrow-right",end:"",class:"flip-in-ltr"})]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1}))}},ye=ne(he,[["__scopeId","data-v-d1ff3871"]]),qe={__name:"[id]",setup(v){const S=ce(),w=n(S.params.id),V=n(S.query.fullview),u=n(!0);parseInt(V.value)===0&&(u.value=!1);const d=[{title:"Verify",icon:le},{title:"Review",icon:se},{title:"Sign",icon:oe},{title:"Review",icon:_e},{title:"Download",icon:re}],l=n(0),y=n(!0);let r=n(null),s=n(null),x=n("error");const b=o=>{var M,R,$,N;const t=o.data,i=o.type,L=o==null?void 0:o.custom;if(r.value=!0,x.value=i,i==="success"||L===!0)s.value=t;else if(typeof((R=(M=t==null?void 0:t.response)==null?void 0:M._data)==null?void 0:R.message)=="object"&&((N=($=t==null?void 0:t.response)==null?void 0:$._data)==null?void 0:N.message)!==null){let U="";for(const P in t.response._data.message)t.response._data.message.hasOwnProperty(P)&&(U+=`${t.response._data.message[P]}
`);s.value=U.trim()}else s.value=t.response._data.message},g=o=>{l.value=l.value+o},h=o=>{l.value=l.value-o},D=n(0),C=n(0),k=n(0);return de(l,o=>{o===1&&(D.value++,C.value++),k.value=o}),(o,t)=>(c(),p(E,{class:"v-container"},{default:a(()=>[e(A,null,{default:a(()=>[u.value?(c(),p(q,{key:0},{default:a(()=>[e(fe,null,{default:a(()=>[e(G,{"current-step":l.value,"onUpdate:currentStep":t[0]||(t[0]=i=>l.value=i),items:d,"is-active-step-valid":y.value,align:"center"},null,8,["current-step","is-active-step-valid"])]),_:1})]),_:1})):j("",!0),e(F)]),_:1}),e(J,{modelValue:f(r),"onUpdate:modelValue":t[1]||(t[1]=i=>ve(r)?r.value=i:r=i),location:"top end",variant:"flat",color:f(x)},{default:a(()=>[pe(me(f(s)),1)]),_:1},8,["modelValue","color"]),m("div",{class:O({"step-rule":l.value===0})},[e(A,null,{default:a(()=>[e(X,{modelValue:l.value,"onUpdate:modelValue":t[2]||(t[2]=i=>l.value=i),disabled:""},{default:a(()=>[e(_,null,{default:a(()=>[e(Y,{onNextStep:g,onAlert:b,"short-url":w.value},null,8,["short-url"])]),_:1}),e(_,null,{default:a(()=>[(c(),p(Z,{key:D.value,viewMode:u.value,currentStep:k.value,onPrevStep:h,onNextStep:g},null,8,["viewMode","currentStep"]))]),_:1}),e(_,null,{default:a(()=>[(c(),p(ee,{key:C.value,onPrevStep:h,onNextStep:g,"short-url":w.value,onAlert:b},null,8,["short-url"]))]),_:1}),e(_,null,{default:a(()=>[(c(),p(ye,{key:D.value,viewMode:u.value,currentStep:k.value,onPrevStep:h,onNextStep:g},null,8,["viewMode","currentStep"]))]),_:1}),e(_,null,{default:a(()=>[e(te,{viewMode:u.value,onPrevStep:h,onAlert:b},null,8,["viewMode"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),u.value?(c(),p(ae,{key:0})):j("",!0)],2)]),_:1}))}};export{qe as default};
